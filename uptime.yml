---
- name: Check uptime and determine root inventory
  hosts: all-linux
  gather_facts: no

  tasks:
    - name: XÃ¡c Ä‘á»‹nh inventory gá»‘c chÃ­nh xÃ¡c
      set_fact:
        root_inventory: >-
          {{
            groups.keys()
            | difference(['all', 'ungrouped', 'all-linux', 'all-win'])
            | select('in', group_names)
            | list
            | first
            | default('unknown')
          }}

    - name: Láº¥y uptime trÃªn Linux
      command: uptime
      register: uptime_result
      when: "'Linux' in ansible_os_family"
      ignore_errors: yes

    - name: Hiá»ƒn thá»‹ thÃ´ng tin
      debug:
        msg: >-
          ğŸ–¥ Host: {{ inventory_hostname }} ({{ ansible_host }})
          ğŸ· Inventory gá»‘c: {{ root_inventory }}
          â³ Uptime: {{ uptime_result.stdout | default('KhÃ´ng láº¥y Ä‘Æ°á»£c') }}
