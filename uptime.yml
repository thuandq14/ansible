---
- name: Check uptime and identify root inventory
  hosts: host-linux
  gather_facts: yes
  
  tasks:
    - name: XÃ¡c Ä‘á»‹nh nhÃ³m inventory gá»‘c
      set_fact:
        root_group: "{{ group_names | intersect(['khangbui', 'vanthanh']) | first | default('unknown') }}"
      when: group_names is defined

    - name: Láº¥y uptime trÃªn Linux
      command: uptime -p
      register: linux_uptime
      when: ansible_os_family == "Linux"

    - name: Láº¥y uptime trÃªn Windows
      win_shell: "(get-date) - (gcim Win32_OperatingSystem).LastBootUpTime"
      register: win_uptime
      when: ansible_os_family == "Windows"

    - name: Debug thÃ´ng tin uptime
      debug:
        msg: >-
          ğŸ–¥ Host: {{ inventory_hostname }} ({{ ansible_host }})
          ğŸ· Inventory gá»‘c: {{ root_group }}
          â³ Uptime: {{
            linux_uptime.stdout if ansible_os_family == "Linux" else
            win_uptime.stdout if ansible_os_family == "Windows" else
            'KhÃ´ng láº¥y Ä‘Æ°á»£c'
          }}
