---
- name: X√°c ƒë·ªãnh Inventory g·ªëc v√† g·ª≠i Telegram
  hosts: all-linux
  gather_facts: no
  tasks:
    - name: X√°c ƒë·ªãnh Inventory g·ªëc ch√≠nh x√°c
      set_fact:
        inventory_goc: >-
          {{
            groups.keys()
            | difference(["all", "ungrouped", "linux", "win", "all-linux", "all-win"])
            | select('equalto', inventory_hostname, groups)
            | list
            | first
            | default('Unknown')
          }}

    - name: Debug ki·ªÉm tra nh√≥m th·ª±c s·ª±
      debug:
        msg: "Host {{ inventory_hostname }} thu·ªôc Inventory g·ªëc: {{ inventory_goc }}"

    - name: G·ª≠i th√¥ng b√°o Telegram
      uri:
        url: "https://api.telegram.org/bot6725419910:AAFPnpMWsIU_kuGFw_RkdjQeyvhzZQ1qxPA/sendMessage"
        method: POST
        body_format: json
        body:
          chat_id: "-4132281180"
          text: |
            üö® *TH√îNG B√ÅO INVENTORY* üö®
            üñ• Host: `{{ inventory_hostname }}`
            üè∑ Inventory g·ªëc: `{{ inventory_goc }}`
        headers:
          Content-Type: "application/json"
