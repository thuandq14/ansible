---
- name: XÃ¡c Ä‘á»‹nh Inventory gá»‘c vÃ  kiá»ƒm tra uptime
  hosts: all-linux
  gather_facts: no
  tasks:
    - name: XÃ¡c Ä‘á»‹nh Inventory gá»‘c
      set_fact:
        inventory_goc: "{{ group_names | intersect(groups.keys()) | first | default('Unknown') }}"

    - name: Run uptime command
      command: uptime
      register: uptime_result
      ignore_errors: yes

    - name: Display uptime output
      debug:
        msg: "{{ uptime_result.stdout }}"
  
    - name: Gá»­i thÃ´ng bÃ¡o Telegram
      uri:
        url: "https://api.telegram.org/bot6725419910:AAFPnpMWsIU_kuGFw_RkdjQeyvhzZQ1qxPA/sendMessage"
        method: POST
        body_format: json
        body:
          chat_id: "-4132281180"
          text: |
            ğŸš€ *Káº¿t quáº£ kiá»ƒm tra uptime* ğŸš€
            ğŸ–¥ Host: `{{ inventory_hostname }}`
            ğŸ· Inventory gá»‘c: `{{ inventory_goc }}`
            âœ… Uptime: `{{ uptime_result.stdout | default('Lá»—i khi cháº¡y lá»‡nh') }}`
        headers:
          Content-Type: "application/json"
      when: uptime_result is defined
