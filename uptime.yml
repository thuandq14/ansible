---
- name: Check uptime and identify root inventory
  hosts: all-linux
  gather_facts: no

  tasks:
    - name: XÃ¡c Ä‘á»‹nh nhÃ³m inventory gá»‘c
      set_fact:
        root_group: >-
          {{
            group_names
            | map('regex_replace', '(-linux|-win)$', '')  # Loáº¡i bá» háº­u tá»‘ nhÃ³m con
            | difference(['all', 'ungrouped', 'linux', 'win', 'all-linux', 'all-win'])
            | first | default('unknown')
          }}

    - name: Láº¥y uptime báº±ng lá»‡nh Ä‘Æ¡n giáº£n
      command: uptime
      register: uptime_result
      ignore_errors: yes  # Bá» qua lá»—i náº¿u khÃ´ng láº¥y Ä‘Æ°á»£c uptime

    - name: Debug thÃ´ng tin uptime
      debug:
        msg: >-
          ğŸ–¥ Host: {{ inventory_hostname }} ({{ ansible_host }})
          ğŸ· Inventory gá»‘c: {{ root_group }}
          â³ Uptime: {{ uptime_result.stdout | default('KhÃ´ng láº¥y Ä‘Æ°á»£c') }}
